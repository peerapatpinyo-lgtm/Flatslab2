# app_theory.py
import streamlit as st

def display_theory():
    """
    Renders the engineering theory, formulas, and code references
    for Flat Slab/Plate Design based on ACI 318.
    """
    
    st.markdown("## üìò Engineering Theory: Flat Slab Design")
    st.markdown("‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏™‡πà‡∏ß‡∏ô‡∏ô‡∏µ‡πâ‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á‡∏ï‡∏≤‡∏°‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô **ACI 318** ‡πÅ‡∏•‡∏∞ **EIT (‡∏ß‡∏™‡∏ó.)** ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡∏û‡∏∑‡πâ‡∏ô‡πÑ‡∏£‡πâ‡∏Ñ‡∏≤‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏ß‡∏¥‡∏ò‡∏µ Equivalent Frame Method (EFM) ‡πÅ‡∏•‡∏∞ Direct Design Method (DDM)")
    
    # 1. Concept Overview
    with st.expander("1. Equivalent Frame Method (EFM) Concept", expanded=True):
        st.markdown("""
        **‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô:**
        ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏û‡∏∑‡πâ‡∏ô‡πÑ‡∏£‡πâ‡∏Ñ‡∏≤‡∏ô (Flat Slab) ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡∏à‡∏≥‡∏•‡∏≠‡∏á‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á 3 ‡∏°‡∏¥‡∏ï‡∏¥ ‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô "‡πÇ‡∏Ñ‡∏£‡∏á‡∏Ç‡πâ‡∏≠‡πÅ‡∏Ç‡πá‡∏á 2 ‡∏°‡∏¥‡∏ï‡∏¥" (2D Plane Frame) ‡πÇ‡∏î‡∏¢‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ñ‡∏ö‡πÜ (Strips) ‡∏ó‡∏±‡πâ‡∏á‡πÉ‡∏ô‡∏ó‡∏¥‡∏®‡∏ó‡∏≤‡∏á‡∏ï‡∏≤‡∏°‡∏¢‡∏≤‡∏ß‡πÅ‡∏•‡∏∞‡∏ï‡∏≤‡∏°‡∏Ç‡∏ß‡∏≤‡∏á
        
        ‡πÅ‡∏ï‡πà‡∏•‡∏∞ Frame ‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏î‡πâ‡∏ß‡∏¢:
        1. **Slab-Beam:** ‡πÅ‡∏ú‡πà‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏Å‡∏ß‡πâ‡∏≤‡∏á $L_2$ ‡∏ó‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏≤‡∏ô
        2. **Equivalent Column:** ‡πÄ‡∏™‡∏≤‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏Ç‡πá‡∏á (Stiffness) ‡∏•‡∏î‡∏•‡∏á‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏ö‡∏¥‡∏î‡∏ï‡∏±‡∏ß‡∏Ç‡∏≠‡∏á‡πÅ‡∏ú‡πà‡∏ô‡∏û‡∏∑‡πâ‡∏ô (Torsional Flexibility)
        """)
        
        st.info("""
        üí° **Key Concept:** ‡πÄ‡∏™‡∏≤‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö Flat Slab ‡∏à‡∏∞ "‡πÑ‡∏°‡πà‡πÅ‡∏Ç‡πá‡∏á‡πÄ‡∏Å‡∏£‡πá‡∏á" ‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ö‡πÄ‡∏™‡∏≤‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏≤‡∏ô-‡πÄ‡∏™‡∏≤‡∏õ‡∏Å‡∏ï‡∏¥ ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏à‡∏∏‡∏î‡∏ï‡πà‡∏≠‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏Å‡∏±‡∏ö‡πÄ‡∏™‡∏≤‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏ö‡∏¥‡∏î‡∏ï‡∏±‡∏ß‡πÑ‡∏î‡πâ (Torsional Rotation)
        """)

    # 2. Stiffness Calculations
    with st.expander("2. Stiffness & Equivalent Column ($K_{ec}$)", expanded=False):
        st.markdown(r"""
        ‡∏Ñ‡πà‡∏≤ Stiffness ‡∏Ç‡∏≠‡∏á‡πÄ‡∏™‡∏≤‡πÄ‡∏™‡∏°‡∏∑‡∏≠‡∏ô ($K_{ec}$) ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏à‡∏≤‡∏Å‡∏ú‡∏•‡∏£‡∏ß‡∏°‡∏Ç‡∏≠‡∏á Stiffness ‡∏Ç‡∏≠‡∏á‡πÄ‡∏™‡∏≤‡∏à‡∏£‡∏¥‡∏á ($\sum K_c$) ‡πÅ‡∏•‡∏∞ Stiffness ‡∏Ç‡∏≠‡∏á‡∏≠‡∏á‡∏Ñ‡πå‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡∏£‡∏±‡∏ö‡πÅ‡∏£‡∏á‡∏ö‡∏¥‡∏î ($K_t$)
        
        $$ \frac{1}{K_{ec}} = \frac{1}{\sum K_c} + \frac{1}{K_t} $$
        
        ‡πÇ‡∏î‡∏¢‡∏ó‡∏µ‡πà:
        * $K_c$ = Stiffness ‡∏Ç‡∏≠‡∏á‡πÄ‡∏™‡∏≤‡∏ö‡∏ô‡πÅ‡∏•‡∏∞‡πÄ‡∏™‡∏≤‡∏•‡πà‡∏≤‡∏á ($\frac{4EI}{L}$ ‡∏´‡∏£‡∏∑‡∏≠ $\frac{3EI}{L}$)
        * $K_t$ = Torsional Stiffness ‡∏Ç‡∏≠‡∏á‡πÅ‡∏ñ‡∏ö‡∏û‡∏∑‡πâ‡∏ô‡∏Ç‡πâ‡∏≤‡∏á‡∏´‡∏±‡∏ß‡πÄ‡∏™‡∏≤
        
        $$ K_t = \sum \frac{9 E_{cs} C}{L_2 (1 - c_2/L_2)^3} $$
        
        > **‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå:** ‡∏Ñ‡πà‡∏≤ $K_{ec}$ ‡∏à‡∏∞‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤ $\sum K_c$ ‡πÄ‡∏™‡∏°‡∏≠ ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÇ‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ó‡∏µ‡πà‡∏ñ‡πà‡∏≤‡∏¢‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏™‡∏≤‡∏•‡∏î‡∏•‡∏á ‡πÅ‡∏ï‡πà‡πÑ‡∏õ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÇ‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ö‡∏ß‡∏Å‡∏Å‡∏•‡∏≤‡∏á‡∏ä‡πà‡∏ß‡∏á‡∏û‡∏∑‡πâ‡∏ô‡πÅ‡∏ó‡∏ô
        """)

    # 3. Static Moment
    with st.expander("3. Total Static Moment ($M_o$)", expanded=False):
        st.markdown(r"""
        ‡πÇ‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏î‡∏±‡∏î‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏™‡∏≤ (Span) ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏à‡∏≤‡∏Å‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏ö‡∏£‡∏£‡∏ó‡∏∏‡∏Å‡∏õ‡∏£‡∏∞‡∏•‡∏±‡∏¢ ($w_u$):
        
        $$ M_o = \frac{w_u L_2 L_n^2}{8} $$
        
        * $L_2$: ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡∏Ç‡∏≠‡∏á Frame (‡∏£‡∏∞‡∏¢‡∏∞‡∏Å‡∏∂‡πà‡∏á‡∏Å‡∏•‡∏≤‡∏á‡πÄ‡∏™‡∏≤‡∏ñ‡∏∂‡∏á‡∏Å‡∏∂‡πà‡∏á‡∏Å‡∏•‡∏≤‡∏á‡πÄ‡∏™‡∏≤)
        * $L_n$: ‡∏£‡∏∞‡∏¢‡∏∞‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏™‡∏≤‡∏™‡∏∏‡∏ó‡∏ò‡∏¥ (Clear Span) ‡∏à‡∏≤‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏™‡∏≤‡∏ñ‡∏∂‡∏á‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏™‡∏≤ **(‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏°‡∏≤‡∏Å ‡∏´‡πâ‡∏≤‡∏°‡πÉ‡∏ä‡πâ Center-to-Center)**
        """)

    # 4. Moment Distribution Factors
    with st.expander("4. ‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢‡πÇ‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå (Moment Distribution)", expanded=False):
        st.markdown("### 4.1 ‡∏Å‡∏≤‡∏£‡πÅ‡∏ö‡πà‡∏á‡πÇ‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå (Longitudinal)")
        st.markdown("‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ä‡πà‡∏ß‡∏á‡∏†‡∏≤‡∏¢‡πÉ‡∏ô (Interior Span):")
        st.markdown("- **Negative Moment:** 65% ‡∏Ç‡∏≠‡∏á $M_o$")
        st.markdown("- **Positive Moment:** 35% ‡∏Ç‡∏≠‡∏á $M_o$")
        
        st.markdown("---")
        st.markdown("### 4.2 Column Strip vs Middle Strip")
        st.markdown("‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡πÑ‡∏î‡πâ Total Neg/Pos Moment ‡πÅ‡∏•‡πâ‡∏ß ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÅ‡∏ö‡πà‡∏á‡∏•‡∏á **‡πÅ‡∏ñ‡∏ö‡πÄ‡∏™‡∏≤ (Column Strip)** ‡πÅ‡∏•‡∏∞ **‡πÅ‡∏ñ‡∏ö‡∏Å‡∏•‡∏≤‡∏á (Middle Strip)** ‡∏î‡∏±‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á:")
        
        st.markdown("**Interior Negative Moment (% ‡πÄ‡∏Ç‡πâ‡∏≤ Column Strip):**")
        st.table({
            "L2/L1 Ratio": ["0.5", "1.0", "2.0"],
            "(Œ±1*L2/L1) = 0": ["75%", "75%", "75%"],
            "(Œ±1*L2/L1) ‚â• 1.0": ["90%", "75%", "45%"]
        })
        st.caption("*‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: ‡∏Å‡∏£‡∏ì‡∏µ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏≤‡∏ô‡∏•‡∏∂‡∏Å (Beam) ‡∏Ñ‡πà‡∏≤ Œ±1 = 0 ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡πÅ‡∏ñ‡∏ß‡∏ö‡∏ô‡∏™‡∏∏‡∏î (75%)*")
        
        st.markdown("**Positive Moment (% ‡πÄ‡∏Ç‡πâ‡∏≤ Column Strip):**")
        st.markdown("- ‡πÇ‡∏î‡∏¢‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ‡πÉ‡∏ä‡πâ **60%** ‡∏•‡∏á Column Strip ‡πÅ‡∏•‡∏∞ **40%** ‡∏•‡∏á Middle Strip (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏û‡∏∑‡πâ‡∏ô‡πÑ‡∏£‡πâ‡∏Ñ‡∏≤‡∏ô‡πÅ‡∏ö‡∏ö‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏≤‡∏ô)")

    # 5. Punching Shear
    with st.expander("5. ‡πÅ‡∏£‡∏á‡πÄ‡∏â‡∏∑‡∏≠‡∏ô‡∏ó‡∏∞‡∏•‡∏∏ (Punching Shear)", expanded=False):
        st.markdown(r"""
        ‡∏à‡∏∏‡∏î‡∏ß‡∏¥‡∏Å‡∏§‡∏ï‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡∏Ç‡∏≠‡∏á Flat Slab ‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏î‡πâ‡∏ß‡∏¢‡πÅ‡∏£‡∏á‡πÄ‡∏â‡∏∑‡∏≠‡∏ô‡∏£‡∏≠‡∏ö‡∏´‡∏±‡∏ß‡πÄ‡∏™‡∏≤ (Punching Shear)
        
        **Critical Section:** ‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡∏£‡∏∞‡∏¢‡∏∞ $d/2$ ‡∏à‡∏≤‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏™‡∏≤
        
        ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏£‡∏±‡∏ö‡πÅ‡∏£‡∏á‡πÄ‡∏â‡∏∑‡∏≠‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏≠‡∏ô‡∏Å‡∏£‡∏µ‡∏ï ($V_c$) ‡∏ï‡∏≤‡∏° ACI 318 ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡πà‡∏≤‡∏ô‡πâ‡∏≠‡∏¢‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡∏à‡∏≤‡∏Å 3 ‡∏™‡∏π‡∏ï‡∏£:
        
        1. $$ V_c = 0.33 \sqrt{f'_c} b_o d $$ (‡∏™‡∏π‡∏ï‡∏£‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ)
        2. $$ V_c = 0.17 (1 + \frac{2}{\beta}) \sqrt{f'_c} b_o d $$ (‡∏ú‡∏•‡∏Ç‡∏≠‡∏á‡∏ó‡∏£‡∏á‡∏™‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏µ‡πà‡∏¢‡∏°‡∏ú‡∏∑‡∏ô‡∏ú‡πâ‡∏≤)
        3. $$ V_c = 0.083 (\frac{\alpha_s d}{b_o} + 2) \sqrt{f'_c} b_o d $$ (‡∏ú‡∏•‡∏Ç‡∏≠‡∏á‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÄ‡∏™‡∏≤)
        
        ‡πÇ‡∏î‡∏¢‡∏ó‡∏µ‡πà:
        * $\beta$: ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô‡∏î‡πâ‡∏≤‡∏ô‡∏¢‡∏≤‡∏ß/‡∏î‡πâ‡∏≤‡∏ô‡∏™‡∏±‡πâ‡∏ô‡∏Ç‡∏≠‡∏á‡πÄ‡∏™‡∏≤
        * $\alpha_s$: 40 (‡πÄ‡∏™‡∏≤‡∏Å‡∏•‡∏≤‡∏á), 30 (‡πÄ‡∏™‡∏≤‡∏Ç‡∏≠‡∏ö), 20 (‡πÄ‡∏™‡∏≤‡∏°‡∏∏‡∏°)
        """)

    # 6. Minimum Thickness
    with st.expander("6. ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏ô‡∏≤‡∏û‡∏∑‡πâ‡∏ô‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥ (Min. Thickness)", expanded=False):
        st.markdown("""
        ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏Å‡∏≤‡∏£‡πÅ‡∏≠‡πà‡∏ô‡∏ï‡∏±‡∏ß (Deflection) ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î ACI ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏ô‡∏≤‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥ ($h_{min}$):
        
        | Grade ‡πÄ‡∏´‡∏•‡πá‡∏Å ($f_y$) | ‡πÑ‡∏°‡πà‡∏°‡∏µ Drop Panel | ‡∏°‡∏µ Drop Panel |
        | :--- | :---: | :---: |
        | SD40 (400 MPa) | $L_n / 30$ | $L_n / 33$ |
        | SD50 (500 MPa) | $L_n / 28$ | $L_n / 31$ |
        
        *‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏µ Drop Panel ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏ô‡∏≤ Drop ‡∏ï‡πâ‡∏≠‡∏á ‚â• $1.25 h_s$ ‡πÅ‡∏•‡∏∞‡∏¢‡∏∑‡πà‡∏ô‡∏≠‡∏≠‡∏Å‡πÑ‡∏õ ‚â• $L/6$*
        """)
